# PM æŒ‡ä»¤ - é–‹ç™¼è€…B ä¸‹ä¸€æ­¥ä»»å‹™

## ğŸ“Š é–‹ç™¼è€…B å®Œæˆæƒ…æ³æª¢æŸ¥å ±å‘Š

### âœ… **å·²å®Œæˆé …ç›®**

#### 1. **å‘Šè­¦ç³»çµ±å¯¦ç¾** âœ…
- **AlertService.js**: å·²å¯¦ç¾å®Œæ•´çš„å‘Šè­¦æœå‹™
  - æ”¯æŒå¤šç¨®å‘Šè­¦æ–¹å¼ï¼ˆéƒµä»¶ã€Webhookã€æ—¥èªŒï¼‰
  - å‘Šè­¦è¦å‰‡é…ç½®å’Œå‹•æ…‹èª¿æ•´
  - å‘Šè­¦æŠ‘åˆ¶å’Œå»é‡æ©Ÿåˆ¶
  - å‘Šè­¦æ­·å²ç®¡ç†å’Œçµ±è¨ˆ
  - æ¸¬è©¦è¦†è“‹ç‡ï¼š14/14 é€šé âœ…

#### 2. **ç›£æ§å„€è¡¨æ¿å¯¦ç¾** âœ…
- **MonitoringDashboard.js**: å·²å¯¦ç¾å®Œæ•´çš„ç›£æ§å„€è¡¨æ¿
  - å¯¦æ™‚æ€§èƒ½æŒ‡æ¨™é¡¯ç¤º
  - æ­·å²æ•¸æ“šå¯è¦–åŒ–
  - å‘Šè­¦ç‹€æ…‹å±•ç¤º
  - åœ–è¡¨æ•¸æ“šç”Ÿæˆï¼ˆéŸ¿æ‡‰æ™‚é–“ã€æˆåŠŸç‡ã€å…§å­˜ä½¿ç”¨ç­‰ï¼‰
  - æ•¸æ“šå°å‡ºåŠŸèƒ½ï¼ˆJSONã€CSVï¼‰
  - æ¸¬è©¦è¦†è“‹ç‡ï¼š21/21 é€šé âœ…

#### 3. **ç›£æ§APIè·¯ç”±** âœ…
- **routes/monitoring.js**: å·²å¯¦ç¾å®Œæ•´çš„ç›£æ§API
  - å„€è¡¨æ¿æ•¸æ“šæ¥å£
  - æ€§èƒ½æŒ‡æ¨™æ¥å£
  - å‘Šè­¦ç®¡ç†æ¥å£
  - åœ–è¡¨æ•¸æ“šæ¥å£
  - æ•¸æ“šå°å‡ºæ¥å£
  - ç³»çµ±å¥åº·æª¢æŸ¥æ¥å£

#### 4. **æ¸¬è©¦æ–‡ä»¶å®Œå–„** âœ…
- **AlertService.test.js**: å®Œæ•´çš„å‘Šè­¦æœå‹™æ¸¬è©¦
- **MonitoringDashboard.test.js**: å®Œæ•´çš„ç›£æ§å„€è¡¨æ¿æ¸¬è©¦
- æ‰€æœ‰æ¸¬è©¦éƒ½é€šéï¼Œä»£ç¢¼è³ªé‡è‰¯å¥½

### âŒ **æœªå®Œæˆé …ç›®**

#### 1. **ç·©å­˜ç³»çµ±å„ªåŒ–** âŒ
- **CacheManager.js**: æœªå¯¦ç¾
- Redis ç·©å­˜é›†æˆï¼šæœªå¯¦ç¾
- æ™ºèƒ½ç·©å­˜ç­–ç•¥ï¼šæœªå¯¦ç¾

#### 2. **éƒ¨ç½²å’Œé‹ç¶­å·¥å…·** âŒ
- **deploy/ ç›®éŒ„**: æœªå‰µå»º
- **deploy.sh éƒ¨ç½²è…³æœ¬**: æœªå¯¦ç¾
- **Docker å®¹å™¨åŒ–é…ç½®**: æœªå¯¦ç¾
- **é‹ç¶­å·¥å…·**: æœªå¯¦ç¾

#### 3. **æ–‡æª”å®Œå–„** âŒ
- ç›£æ§ä½¿ç”¨æŒ‡å—ï¼šæœªå¯¦ç¾
- å‘Šè­¦é…ç½®èªªæ˜ï¼šæœªå¯¦ç¾
- éƒ¨ç½²æ“ä½œæ‰‹å†Šï¼šæœªå¯¦ç¾
- æ•…éšœæ’é™¤æŒ‡å—ï¼šæœªå¯¦ç¾

### ğŸ“ˆ **å®Œæˆåº¦è©•ä¼°**

| ä»»å‹™é …ç›® | å®Œæˆåº¦ | ç‹€æ…‹ |
|---------|--------|------|
| å‘Šè­¦ç³»çµ±å¯¦ç¾ | 100% | âœ… å®Œå…¨å®Œæˆ |
| ç›£æ§å„€è¡¨æ¿ | 100% | âœ… å®Œå…¨å®Œæˆ |
| ç›£æ§APIè·¯ç”± | 100% | âœ… å®Œå…¨å®Œæˆ |
| æ¸¬è©¦æ–‡ä»¶ | 100% | âœ… å®Œå…¨å®Œæˆ |
| ç·©å­˜ç³»çµ±å„ªåŒ– | 0% | âŒ æœªå®Œæˆ |
| éƒ¨ç½²å’Œé‹ç¶­å·¥å…· | 0% | âŒ æœªå®Œæˆ |
| æ–‡æª”å®Œå–„ | 0% | âŒ æœªå®Œæˆ |

### ğŸ¯ **ç¸½é«”è©•ä¼°**

**å®Œæˆåº¦ï¼š60%** 

**å„ªé»ï¼š**
- âœ… å‘Šè­¦ç³»çµ±å¯¦ç¾å®Œæ•´ä¸”åŠŸèƒ½å¼·å¤§
- âœ… ç›£æ§å„€è¡¨æ¿åŠŸèƒ½é½Šå…¨
- âœ… API æ¥å£è¨­è¨ˆå®Œå–„
- âœ… æ¸¬è©¦è¦†è“‹ç‡100%
- âœ… ä»£ç¢¼è³ªé‡é«˜ï¼Œçµæ§‹æ¸…æ™°

**éœ€è¦æ”¹é€²ï¼š**
- âŒ ç·©å­˜ç³»çµ±æœªå¯¦ç¾
- âŒ éƒ¨ç½²å·¥å…·æœªå¯¦ç¾
- âŒ é‹ç¶­å·¥å…·æœªå¯¦ç¾
- âŒ æ–‡æª”æœªå®Œå–„

### ğŸ“ **ä¸‹ä¸€æ­¥ä»»å‹™**

**ä»»å‹™åç¨±**ï¼šç·©å­˜ç³»çµ±å¯¦ç¾å’Œéƒ¨ç½²å·¥å…·é–‹ç™¼  
**è² è²¬äºº**ï¼šé–‹ç™¼è€…B  
**æ™‚é–“ç¯„åœ**ï¼šDay 13-16 (4å¤©)  
**å„ªå…ˆç´š**ï¼šé«˜  
**ç›®æ¨™**ï¼šå®Œæˆç·©å­˜ç³»çµ±å¯¦ç¾ã€éƒ¨ç½²å·¥å…·é–‹ç™¼å’Œæ–‡æª”å®Œå–„

##  è©³ç´°ä»»å‹™æ¸…å–®

### **Day 13 ä»»å‹™ï¼šç·©å­˜ç³»çµ±å¯¦ç¾**

#### 1. **CacheManager.js å¯¦ç¾** (4å°æ™‚)
- **ç›®æ¨™**ï¼šå‰µå»ºçµ±ä¸€çš„ç·©å­˜ç®¡ç†ç³»çµ±
- **å¯¦ç¾è¦æ±‚**ï¼š
  - æ”¯æŒ Redis å’Œå…§å­˜ç·©å­˜é›™æ¨¡å¼
  - æ™ºèƒ½ç·©å­˜ç­–ç•¥ï¼ˆLRUã€TTLã€è‡ªå‹•æ¸…ç†ï¼‰
  - ç·©å­˜æ€§èƒ½ç›£æ§å’Œçµ±è¨ˆ
  - ç·©å­˜éµç®¡ç†å’Œå‘½åç©ºé–“
  - ç·©å­˜é ç†±å’Œå¤±æ•ˆæ©Ÿåˆ¶

#### 2. **ç·©å­˜é›†æˆå„ªåŒ–** (4å°æ™‚)
- **ç›®æ¨™**ï¼šå°‡ç·©å­˜ç³»çµ±é›†æˆåˆ°ç¾æœ‰æœå‹™ä¸­
- **å¯¦ç¾è¦æ±‚**ï¼š
  - åœ¨ `PerformanceMonitor` ä¸­é›†æˆç·©å­˜
  - åœ¨ `MonitoringDashboard` ä¸­é›†æˆç·©å­˜
  - åœ¨ API è·¯ç”±ä¸­é›†æˆç·©å­˜
  - ç·©å­˜å‘½ä¸­ç‡ç›£æ§å’Œå‘Šè­¦

### **Day 14 ä»»å‹™ï¼šéƒ¨ç½²å·¥å…·é–‹ç™¼**

#### 1. **Docker å®¹å™¨åŒ–** (4å°æ™‚)
- **ç›®æ¨™**ï¼šå‰µå»ºå®Œæ•´çš„ Docker éƒ¨ç½²æ–¹æ¡ˆ
- **å¯¦ç¾è¦æ±‚**ï¼š
  - å‰µå»º `Dockerfile` å’Œ `docker-compose.yml`
  - å¤šéšæ®µæ§‹å»ºå„ªåŒ–
  - ç’°å¢ƒè®Šé‡é…ç½®ç®¡ç†
  - å¥åº·æª¢æŸ¥å’Œé‡å•Ÿç­–ç•¥

#### 2. **éƒ¨ç½²è…³æœ¬é–‹ç™¼** (4å°æ™‚)
- **ç›®æ¨™**ï¼šå‰µå»ºè‡ªå‹•åŒ–éƒ¨ç½²è…³æœ¬
- **å¯¦ç¾è¦æ±‚**ï¼š
  - å‰µå»º `deploy/` ç›®éŒ„çµæ§‹
  - å¯¦ç¾ `deploy.sh` éƒ¨ç½²è…³æœ¬
  - æ”¯æŒé–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ç’°å¢ƒ
  - å›æ»¾å’Œç‰ˆæœ¬ç®¡ç†

### **Day 15 ä»»å‹™ï¼šé‹ç¶­å·¥å…·é–‹ç™¼**

#### 1. **å¥åº·æª¢æŸ¥å·¥å…·** (4å°æ™‚)
- **ç›®æ¨™**ï¼šå‰µå»ºç³»çµ±å¥åº·æª¢æŸ¥å·¥å…·
- **å¯¦ç¾è¦æ±‚**ï¼š
  - å‰µå»º `tools/health-check.js`
  - æª¢æŸ¥æ•¸æ“šåº«é€£æ¥ã€Redis é€£æ¥ã€äº¤æ˜“æ‰€é€£æ¥
  - æª¢æŸ¥ç³»çµ±è³‡æºä½¿ç”¨æƒ…æ³
  - ç”Ÿæˆå¥åº·å ±å‘Š

#### 2. **é‹ç¶­è¨ºæ–·å·¥å…·** (4å°æ™‚)
- **ç›®æ¨™**ï¼šå‰µå»ºæ•…éšœè¨ºæ–·å’Œæ€§èƒ½åˆ†æå·¥å…·
- **å¯¦ç¾è¦æ±‚**ï¼š
  - å‰µå»º `tools/diagnostics.js`
  - æ—¥èªŒåˆ†æå·¥å…·
  - æ€§èƒ½ç“¶é ¸åˆ†æ
  - æ•…éšœè‡ªå‹•ä¿®å¾©å»ºè­°

### **Day 16 ä»»å‹™ï¼šæ–‡æª”å®Œå–„å’Œæ¸¬è©¦**

#### 1. **ç›£æ§æ–‡æª”å®Œå–„** (4å°æ™‚)
- **ç›®æ¨™**ï¼šå‰µå»ºå®Œæ•´çš„ç›£æ§ç³»çµ±æ–‡æª”
- **å¯¦ç¾è¦æ±‚**ï¼š
  - å‰µå»º `docs/monitoring/` ç›®éŒ„
  - ç›£æ§ç³»çµ±ä½¿ç”¨æŒ‡å—
  - å‘Šè­¦é…ç½®èªªæ˜
  - æ€§èƒ½å„ªåŒ–æŒ‡å—
  - æ•…éšœæ’é™¤æ‰‹å†Š

#### 2. **éƒ¨ç½²æ–‡æª”å’Œæ¸¬è©¦** (4å°æ™‚)
- **ç›®æ¨™**ï¼šå‰µå»ºéƒ¨ç½²æ–‡æª”ä¸¦é€²è¡Œæ¸¬è©¦
- **å¯¦ç¾è¦æ±‚**ï¼š
  - å‰µå»º `docs/deployment/` ç›®éŒ„
  - éƒ¨ç½²æ“ä½œæ‰‹å†Š
  - ç’°å¢ƒé…ç½®æŒ‡å—
  - éƒ¨ç½²æµç¨‹æ¸¬è©¦
  - é‹ç¶­å·¥å…·æ¸¬è©¦

##  å…·é«”å¯¦ç¾è¦æ±‚

### **1. CacheManager.js å¯¦ç¾**

```javascript
/**
 * ç·©å­˜ç®¡ç†å™¨
 * çµ±ä¸€ç®¡ç†ç³»çµ±ç·©å­˜
 */
const Redis = require('redis');
const logger = require('../utils/logger');

class CacheManager {
    constructor() {
        this.caches = new Map();
        this.redis = null;
        this.config = require('../config/performance');
        this.stats = {
            hits: 0,
            misses: 0,
            sets: 0,
            deletes: 0,
            errors: 0
        };
    }

    /**
     * åˆå§‹åŒ–ç·©å­˜ç³»çµ±
     */
    async initialize() {
        try {
            // åˆå§‹åŒ– Redis é€£æ¥
            if (this.config.cache.redis && this.config.cache.redis.enabled) {
                this.redis = Redis.createClient({
                    host: this.config.cache.redis.host || 'localhost',
                    port: this.config.cache.redis.port || 6379,
                    password: this.config.cache.redis.password,
                    db: this.config.cache.redis.db || 0
                });

                this.redis.on('error', (err) => {
                    logger.error('Redis é€£æ¥éŒ¯èª¤:', err);
                    this.stats.errors++;
                });

                this.redis.on('connect', () => {
                    logger.info('Redis é€£æ¥æˆåŠŸ');
                });

                await this.redis.connect();
            }

            // åˆå§‹åŒ–å…§å­˜ç·©å­˜
            this.initializeMemoryCaches();
            
            logger.info('ç·©å­˜ç®¡ç†å™¨åˆå§‹åŒ–æˆåŠŸ');
        } catch (error) {
            logger.error('ç·©å­˜ç®¡ç†å™¨åˆå§‹åŒ–å¤±æ•—:', error);
            throw error;
        }
    }

    /**
     * è¨­ç½®ç·©å­˜
     */
    async set(key, value, ttl = null) {
        try {
            const cacheKey = this.generateKey(key);
            const cacheValue = JSON.stringify(value);
            const expiry = ttl || this.config.cache.defaultTTL;

            if (this.redis) {
                await this.redis.setEx(cacheKey, expiry, cacheValue);
            } else {
                this.caches.set(cacheKey, {
                    value: cacheValue,
                    expiry: Date.now() + expiry * 1000
                });
            }

            this.stats.sets++;
            logger.debug(`ç·©å­˜è¨­ç½®æˆåŠŸ: ${cacheKey}`);
        } catch (error) {
            this.stats.errors++;
            logger.error('è¨­ç½®ç·©å­˜å¤±æ•—:', error);
            throw error;
        }
    }

    /**
     * ç²å–ç·©å­˜
     */
    async get(key) {
        try {
            const cacheKey = this.generateKey(key);
            let value = null;

            if (this.redis) {
                const cached = await this.redis.get(cacheKey);
                value = cached ? JSON.parse(cached) : null;
            } else {
                const cached = this.caches.get(cacheKey);
                if (cached && cached.expiry > Date.now()) {
                    value = JSON.parse(cached.value);
                }
            }

            if (value !== null) {
                this.stats.hits++;
                logger.debug(`ç·©å­˜å‘½ä¸­: ${cacheKey}`);
            } else {
                this.stats.misses++;
                logger.debug(`ç·©å­˜æœªå‘½ä¸­: ${cacheKey}`);
            }

            return value;
        } catch (error) {
            this.stats.errors++;
            logger.error('ç²å–ç·©å­˜å¤±æ•—:', error);
            return null;
        }
    }

    /**
     * åˆªé™¤ç·©å­˜
     */
    async delete(key) {
        try {
            const cacheKey = this.generateKey(key);

            if (this.redis) {
                await this.redis.del(cacheKey);
            } else {
                this.caches.delete(cacheKey);
            }

            this.stats.deletes++;
            logger.debug(`ç·©å­˜åˆªé™¤æˆåŠŸ: ${cacheKey}`);
        } catch (error) {
            this.stats.errors++;
            logger.error('åˆªé™¤ç·©å­˜å¤±æ•—:', error);
            throw error;
        }
    }

    /**
     * æ¸…ç†éæœŸç·©å­˜
     */
    async cleanup() {
        try {
            if (!this.redis) {
                const now = Date.now();
                for (const [key, cached] of this.caches) {
                    if (cached.expiry <= now) {
                        this.caches.delete(key);
                    }
                }
            }

            logger.info('ç·©å­˜æ¸…ç†å®Œæˆ');
        } catch (error) {
            logger.error('ç·©å­˜æ¸…ç†å¤±æ•—:', error);
        }
    }

    /**
     * ç²å–ç·©å­˜çµ±è¨ˆ
     */
    getStats() {
        const total = this.stats.hits + this.stats.misses;
        const hitRate = total > 0 ? (this.stats.hits / total * 100).toFixed(2) : 0;

        return {
            ...this.stats,
            hitRate: `${hitRate}%`,
            totalRequests: total
        };
    }

    /**
     * ç”Ÿæˆç·©å­˜éµ
     */
    generateKey(key) {
        return `arbitrage:${key}`;
    }

    /**
     * åˆå§‹åŒ–å…§å­˜ç·©å­˜
     */
    initializeMemoryCaches() {
        // è¨­ç½®å®šæœŸæ¸…ç†
        setInterval(() => {
            this.cleanup();
        }, this.config.cache.cleanupInterval || 300000); // 5åˆ†é˜
    }
}

module.exports = CacheManager;
```

### **2. Docker é…ç½®å¯¦ç¾**

#### **Dockerfile**
```dockerfile
# å¤šéšæ®µæ§‹å»º
FROM node:18-alpine AS builder

WORKDIR /app

# è¤‡è£½ package æ–‡ä»¶
COPY package*.json ./
RUN npm ci --only=production

# è¤‡è£½æºä»£ç¢¼
COPY . .

# æ§‹å»ºæ‡‰ç”¨
RUN npm run build

# ç”Ÿç”¢éšæ®µ
FROM node:18-alpine AS production

WORKDIR /app

# å®‰è£ç”Ÿç”¢ä¾è³´
COPY package*.json ./
RUN npm ci --only=production && npm cache clean --force

# è¤‡è£½æ§‹å»ºçµæœ
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/server ./server

# å‰µå»ºé root ç”¨æˆ¶
RUN addgroup -g 1001 -S nodejs
RUN adduser -S arbitrage -u 1001

# è¨­ç½®æ¬Šé™
RUN chown -R arbitrage:nodejs /app
USER arbitrage

# æš´éœ²ç«¯å£
EXPOSE 3000

# å¥åº·æª¢æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:3000/health || exit 1

# å•Ÿå‹•æ‡‰ç”¨
CMD ["node", "server/index.js"]
```

#### **docker-compose.yml**
```yaml
version: '3.8'

services:
  arbitrage-system:
    build: .
    container_name: arbitrage-system
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - MONGODB_URI=mongodb://mongo:27017/arbitrage
      - REDIS_URL=redis://redis:6379
    depends_on:
      - mongo
      - redis
    volumes:
      - ./logs:/app/logs
    restart: unless-stopped
    networks:
      - arbitrage-network

  mongo:
    image: mongo:6.0
    container_name: arbitrage-mongo
    ports:
      - "27017:27017"
    volumes:
      - mongo_data:/data/db
    restart: unless-stopped
    networks:
      - arbitrage-network

  redis:
    image: redis:7-alpine
    container_name: arbitrage-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - arbitrage-network

volumes:
  mongo_data:
  redis_data:

networks:
  arbitrage-network:
    driver: bridge
```

### **3. éƒ¨ç½²è…³æœ¬å¯¦ç¾**

#### **deploy/deploy.sh**
```bash
#!/bin/bash
# è·¨äº¤æ˜“æ‰€å¥—åˆ©ç³»çµ±éƒ¨ç½²è…³æœ¬

set -e

# é…ç½®è®Šé‡
APP_NAME="arbitrage-system"
DOCKER_IMAGE="arbitrage-system:latest"
CONTAINER_NAME="arbitrage-system"
PORT=3000
ENVIRONMENT=${1:-production}

echo "ğŸš€ é–‹å§‹éƒ¨ç½² $APP_NAME ($ENVIRONMENT ç’°å¢ƒ)..."

# æª¢æŸ¥ Docker æ˜¯å¦é‹è¡Œ
if ! docker info > /dev/null 2>&1; then
    echo "âŒ Docker æœªé‹è¡Œï¼Œè«‹å…ˆå•Ÿå‹• Docker"
    exit 1
fi

# 1. æ§‹å»º Docker é¡åƒ
echo "ğŸ“¦ æ§‹å»º Docker é¡åƒ..."
docker build -t $DOCKER_IMAGE .

# 2. åœæ­¢ç¾æœ‰å®¹å™¨
echo "ğŸ›‘ åœæ­¢ç¾æœ‰å®¹å™¨..."
docker stop $CONTAINER_NAME || true
docker rm $CONTAINER_NAME || true

# 3. å•Ÿå‹•æ–°å®¹å™¨
echo "â–¶ï¸ å•Ÿå‹•æ–°å®¹å™¨..."
docker run -d \
  --name $CONTAINER_NAME \
  -p $PORT:3000 \
  --env-file .env.$ENVIRONMENT \
  --restart unless-stopped \
  $DOCKER_IMAGE

# 4. å¥åº·æª¢æŸ¥
echo "ğŸ” åŸ·è¡Œå¥åº·æª¢æŸ¥..."
sleep 10

# ç­‰å¾…æœå‹™å•Ÿå‹•
for i in {1..30}; do
    if curl -f http://localhost:$PORT/health > /dev/null 2>&1; then
        echo "âœ… å¥åº·æª¢æŸ¥é€šé"
        break
    fi
    echo "â³ ç­‰å¾…æœå‹™å•Ÿå‹•... ($i/30)"
    sleep 2
done

# æœ€çµ‚æª¢æŸ¥
if ! curl -f http://localhost:$PORT/health > /dev/null 2>&1; then
    echo "âŒ å¥åº·æª¢æŸ¥å¤±æ•—"
    echo "ğŸ“‹ å®¹å™¨æ—¥èªŒï¼š"
    docker logs $CONTAINER_NAME
    exit 1
fi

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo "ğŸŒ æ‡‰ç”¨åœ°å€: http://localhost:$PORT"
echo "ğŸ“Š ç›£æ§åœ°å€: http://localhost:$PORT/monitoring"
echo "ğŸ” å¥åº·æª¢æŸ¥: http://localhost:$PORT/health"
```

### **4. é‹ç¶­å·¥å…·å¯¦ç¾**

#### **tools/health-check.js**
```javascript
/**
 * ç³»çµ±å¥åº·æª¢æŸ¥å·¥å…·
 */
const axios = require('axios');
const mongoose = require('mongoose');
const Redis = require('redis');
const logger = require('../utils/logger');

class HealthChecker {
    constructor() {
        this.checks = [];
        this.results = {};
    }

    /**
     * æ·»åŠ å¥åº·æª¢æŸ¥
     */
    addCheck(name, checkFunction) {
        this.checks.push({ name, checkFunction });
    }

    /**
     * åŸ·è¡Œæ‰€æœ‰å¥åº·æª¢æŸ¥
     */
    async runAllChecks() {
        const results = {};
        
        for (const check of this.checks) {
            try {
                const result = await check.checkFunction();
                results[check.name] = {
                    status: 'healthy',
                    ...result
                };
            } catch (error) {
                results[check.name] = {
                    status: 'unhealthy',
                    error: error.message
                };
            }
        }

        this.results = results;
        return results;
    }

    /**
     * ç”Ÿæˆå¥åº·å ±å‘Š
     */
    generateReport() {
        const healthy = Object.values(this.results).filter(r => r.status === 'healthy').length;
        const total = Object.keys(this.results).length;
        const overallStatus = healthy === total ? 'healthy' : 'unhealthy';

        return {
            overallStatus,
            healthy,
            total,
            checks: this.results,
            timestamp: new Date().toISOString()
        };
    }
}

// å‰µå»ºå¥åº·æª¢æŸ¥å™¨å¯¦ä¾‹
const healthChecker = new HealthChecker();

// æ·»åŠ å„ç¨®å¥åº·æª¢æŸ¥
healthChecker.addCheck('database', async () => {
    const start = Date.now();
    await mongoose.connection.db.admin().ping();
    return {
        responseTime: Date.now() - start,
        message: 'æ•¸æ“šåº«é€£æ¥æ­£å¸¸'
    };
});

healthChecker.addCheck('redis', async () => {
    const start = Date.now();
    const redis = Redis.createClient();
    await redis.connect();
    await redis.ping();
    await redis.disconnect();
    return {
        responseTime: Date.now() - start,
        message: 'Redis é€£æ¥æ­£å¸¸'
    };
});

healthChecker.addCheck('api', async () => {
    const start = Date.now();
    const response = await axios.get('http://localhost:3000/health', { timeout: 5000 });
    return {
        responseTime: Date.now() - start,
        statusCode: response.status,
        message: 'API æœå‹™æ­£å¸¸'
    };
});

module.exports = healthChecker;
```

## âœ… é©—æ”¶æ¨™æº–

### **åŠŸèƒ½é©—æ”¶**
- [ ] CacheManager.js å®Œæ•´å¯¦ç¾
- [ ] Redis ç·©å­˜é›†æˆæˆåŠŸ
- [ ] Docker å®¹å™¨åŒ–é…ç½®å®Œæˆ
- [ ] éƒ¨ç½²è…³æœ¬å¯ç”¨
- [ ] é‹ç¶­å·¥å…·å®Œæ•´
- [ ] æ–‡æª”å®Œå–„

### **æ€§èƒ½é©—æ”¶**
- [ ] ç·©å­˜å‘½ä¸­ç‡ > 90%
- [ ] éŸ¿æ‡‰æ™‚é–“ < 200ms
- [ ] å…§å­˜ä½¿ç”¨ < 500MB
- [ ] éƒ¨ç½²æ™‚é–“ < 5åˆ†é˜

### **æ–‡æª”é©—æ”¶**
- [ ] ç›£æ§ä½¿ç”¨æŒ‡å—
- [ ] å‘Šè­¦é…ç½®èªªæ˜
- [ ] éƒ¨ç½²æ“ä½œæ‰‹å†Š
- [ ] æ•…éšœæ’é™¤æŒ‡å—

##  ç«‹å³è¡Œå‹•

### **ä»Šå¤©é–‹å§‹**ï¼š
1. **ç·©å­˜ç³»çµ±å¯¦ç¾**ï¼šå‰µå»º CacheManager.js
2. **Docker å®¹å™¨åŒ–**ï¼šå‰µå»º Dockerfile å’Œ docker-compose.yml
3. **éƒ¨ç½²è…³æœ¬**ï¼šå¯¦ç¾ deploy.sh

### **æ˜å¤©ç¹¼çºŒ**ï¼š
1. **é‹ç¶­å·¥å…·**ï¼šå‰µå»ºå¥åº·æª¢æŸ¥å’Œè¨ºæ–·å·¥å…·
2. **æ–‡æª”å®Œå–„**ï¼šå‰µå»ºç›£æ§å’Œéƒ¨ç½²æ–‡æª”
3. **æ¸¬è©¦é©—æ”¶**ï¼šé€²è¡Œå®Œæ•´çš„åŠŸèƒ½æ¸¬è©¦

---

##  æ”¯æŒè³‡æº

### **åƒè€ƒæ–‡ä»¶**ï¼š
- `server/services/PerformanceMonitor.js` - æ€§èƒ½ç›£æ§åŸºç¤
- `server/config/performance.js` - æ€§èƒ½é…ç½®
- `server/services/AlertService.js` - å‘Šè­¦æœå‹™
- `server/services/MonitoringDashboard.js` - ç›£æ§å„€è¡¨æ¿

### **æŠ€è¡“æ”¯æŒ**ï¼š
- å¦‚æœ‰å•é¡Œéš¨æ™‚è¯ç¹« PM
- åƒè€ƒç¾æœ‰ç›£æ§å¯¦ç¾
- ä¿æŒä»£ç¢¼è³ªé‡å’Œæ€§èƒ½æ¨™æº–

**ç«‹å³é–‹å§‹ä»»å‹™ï¼** ğŸš€

**æˆåŠŸé—œéµ**ï¼šå°ˆæ³¨æ–¼ç·©å­˜ç³»çµ±å¯¦ç¾å’Œéƒ¨ç½²å·¥å…·é–‹ç™¼ï¼Œç¢ºä¿ç³»çµ±ç©©å®šå¯é ï¼ğŸ’ª

---

##  é€²åº¦è¿½è¹¤

### **Day 13 é€²åº¦**ï¼š
- [ ] CacheManager.js å¯¦ç¾
- [ ] Redis ç·©å­˜é›†æˆ
- [ ] ç·©å­˜æ€§èƒ½ç›£æ§

### **Day 14 é€²åº¦**ï¼š
- [ ] Dockerfile å‰µå»º
- [ ] docker-compose.yml é…ç½®
- [ ] deploy.sh è…³æœ¬å¯¦ç¾

### **Day 15 é€²åº¦**ï¼š
- [ ] å¥åº·æª¢æŸ¥å·¥å…·
- [ ] é‹ç¶­è¨ºæ–·å·¥å…·
- [ ] å·¥å…·æ¸¬è©¦

### **Day 16 é€²åº¦**ï¼š
- [ ] ç›£æ§æ–‡æª”å®Œå–„
- [ ] éƒ¨ç½²æ–‡æª”å‰µå»º
- [ ] å®Œæ•´æ¸¬è©¦é©—æ”¶

---

## â“ å•é¡Œè¨˜éŒ„

### **æŠ€è¡“å•é¡Œ**ï¼š
- [ ] å•é¡Œæè¿°ï¼š
- [ ] è§£æ±ºæ–¹æ¡ˆï¼š
- [ ] ç‹€æ…‹ï¼šå¾…è§£æ±º/å·²è§£æ±º

### **éœ€æ±‚æ¾„æ¸…**ï¼š
- [ ] å•é¡Œæè¿°ï¼š
- [ ] æ¾„æ¸…çµæœï¼š
- [ ] ç‹€æ…‹ï¼šå¾…æ¾„æ¸…/å·²æ¾„æ¸…

---

##  è¯ç¹«æ–¹å¼

**PM è¯ç¹«**ï¼šé€šéæ–‡æª”æ›´æ–°é€²è¡Œæºé€š
**ç·Šæ€¥è¯ç¹«**ï¼šç›´æ¥è¯ç¹« PM
**æŠ€è¡“æ”¯æŒ**ï¼šåƒè€ƒç¾æœ‰ä»£ç¢¼å¯¦ç¾

**æœ€å¾Œæ›´æ–°**ï¼šDay 13 é–‹å§‹
**ä¸‹æ¬¡æ›´æ–°**ï¼šDay 13 çµæŸ